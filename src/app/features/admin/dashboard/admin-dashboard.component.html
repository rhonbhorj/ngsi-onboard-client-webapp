<div class="min-h-screen bg-gray-50">
  <!-- Header -->
  <header class="bg-white shadow-sm border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <!-- Logo and Title -->
        <div class="flex items-center">
          <div class="mx-auto h-16 w-16 rounded-2xl flex items-center justify-center">
            <img src="/images/ngsi-logo.png" alt="NetGlobal" class="w-full h-full object-contain" />
          </div>
          <h1 class="ml-3 text-xl font-semibold text-netpay-dark-blue">Admin Dashboard</h1>
        </div>

        <!-- User Menu -->
        <div class="flex items-center space-x-4">
          <!-- User Profile -->
          <div class="flex items-center space-x-3">
            <img
              [src]="
                currentUser()?.avatar ||
                'https://ui-avatars.com/api/?name=Admin&background=0D9488&color=fff'
              "
              [alt]="currentUser()?.firstName"
              class="h-8 w-8 rounded-full"
            />
            <div class="text-sm">
              <p class="font-medium text-gray-900">
                {{ currentUser()?.firstName }} {{ currentUser()?.lastName }}
              </p>
              <p class="text-gray-500">{{ currentUser()?.role | titlecase }}</p>
            </div>
            <button
              (click)="logout()"
              class="p-2 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-netpay-primary-blue rounded-lg"
            >
              <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Search Bar -->
    <div class="mb-8">
      <div class="max-w-md">
        <label for="search" class="block text-sm font-medium text-gray-700 mb-2"
          >Search Applications</label
        >
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg
              class="h-5 w-5 text-gray-400"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
              />
            </svg>
          </div>
          <input
            id="search"
            type="text"
            [value]="searchQuery()"
            (input)="onSearchChange($any($event.target).value)"
            placeholder="Search by reference number, business name, or contact info..."
            class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-netpay-primary-blue focus:border-netpay-primary-blue sm:text-sm"
          />
        </div>
      </div>
    </div>

    <!-- Recent Applications -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200">
      <div class="px-6 py-4 border-b border-gray-200">
        <h2 class="text-lg font-medium text-gray-900">Recent Applications</h2>
        <p class="text-sm text-gray-500 mt-1">
          Showing {{ filteredApplications().length }} of
          {{ merchantApplications().length }} applications
        </p>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Reference
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Business
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Type
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Contact
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Status
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Submitted
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            @for (application of filteredApplications(); track application.id) {
            <tr class="hover:bg-gray-50">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900">
                  {{ application.referenceNumber || 'N/A' }}
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div>
                  <div class="text-sm font-medium text-gray-900">
                    {{ application.businessName }}
                  </div>
                  <div class="text-sm text-gray-500">
                    {{ application.businessCategory | titlecase }}
                  </div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span
                  class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"
                >
                  {{ application.businessType | titlecase }}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div>
                  <div class="text-sm text-gray-900">
                    {{ application.contactPerson.firstName }}
                    {{ application.contactPerson.lastName }}
                  </div>
                  <div class="text-sm text-gray-500">{{ application.contactPerson.email }}</div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                @switch (application.status) { @case ('pending') {
                <span
                  class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800"
                >
                  Pending
                </span>
                } @case ('approved') {
                <span
                  class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"
                >
                  Approved
                </span>
                } @case ('rejected') {
                <span
                  class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"
                >
                  Rejected
                </span>
                } @case ('under_review') {
                <span
                  class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"
                >
                  Under Review
                </span>
                } }
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                {{ application.submittedDate | date : 'short' }}
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </main>
</div>
